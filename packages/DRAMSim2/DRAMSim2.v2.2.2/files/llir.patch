diff --git a/LibMain.cpp b/LibMain.cpp
new file mode 100644
index 0000000..d2365a1
--- /dev/null
+++ b/LibMain.cpp
@@ -0,0 +1,31 @@
+/*********************************************************************************
+*  Copyright (c) 2010-2011, Elliott Cooper-Balis
+*                             Paul Rosenfeld
+*                             Bruce Jacob
+*                             University of Maryland
+*                             dramninjas [at] gmail [dot] com
+*  All rights reserved.
+*
+*  Redistribution and use in source and binary forms, with or without
+*  modification, are permitted provided that the following conditions are met:
+*
+*     * Redistributions of source code must retain the above copyright notice,
+*        this list of conditions and the following disclaimer.
+*
+*     * Redistributions in binary form must reproduce the above copyright notice,
+*        this list of conditions and the following disclaimer in the documentation
+*        and/or other materials provided with the distribution.
+*
+*  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+*  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+*  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+*  DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+*  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+*  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+*  SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+*  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+*  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+*  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+*********************************************************************************/
+
+int SHOW_SIM_OUTPUT = 0;
diff --git a/Makefile b/Makefile
index abfd563..1889e9c 100644
--- a/Makefile
+++ b/Makefile
@@ -10,30 +10,37 @@ endif
 CXXFLAGS+=$(OPTFLAGS)
 
 EXE_NAME=DRAMSim
+STATIC_LIB_NAME := libdramsim.a
 LIB_NAME=libdramsim.so
 LIB_NAME_MACOS=libdramsim.dylib
 
 SRC = $(wildcard *.cpp)
 OBJ = $(addsuffix .o, $(basename $(SRC)))
 
+LIB_SRC := $(filter-out TraceBasedSim.cpp,$(SRC)) LibMain.cpp
+LIB_OBJ := $(addsuffix .o, $(basename $(LIB_SRC)))
+
 #build portable objects (i.e. with -fPIC)
-POBJ = $(addsuffix .po, $(basename $(SRC)))
+POBJ = $(addsuffix .po, $(basename $(LIB_SRC)))
 
-REBUILDABLES=$(OBJ) ${POBJ} $(EXE_NAME) $(LIB_NAME) 
+REBUILDABLES=$(OBJ) ${POBJ} $(EXE_NAME) $(LIB_NAME) $(STATIC_LIB_NAME)
 
 all: ${EXE_NAME}
 
 #   $@ target name, $^ target deps, $< matched pattern
 $(EXE_NAME): $(OBJ)
-	$(CXX) $(CXXFLAGS) -o $@ $^ 
-	@echo "Built $@ successfully" 
+	$(CXX) $(CXXFLAGS) -o $@ $^
+	@echo "Built $@ successfully"
 
 $(LIB_NAME): $(POBJ)
-	g++ -g -shared -Wl,-soname,$@ -o $@ $^
+	$(CXX) -g -shared -Wl,-soname,$@ -o $@ $^
 	@echo "Built $@ successfully"
 
+$(STATIC_LIB_NAME): $(LIB_OBJ)
+	$(AR) crs $@ $^
+
 $(LIB_NAME_MACOS): $(POBJ)
-	g++ -dynamiclib -o $@ $^
+	$(CXX) -dynamiclib -o $@ $^
 	@echo "Built $@ successfully"
 
 #include the autogenerated dependency files for each .o file
@@ -49,11 +56,11 @@ $(LIB_NAME_MACOS): $(POBJ)
 
 # build all .cpp files to .o files
 %.o : %.cpp
-	g++ $(CXXFLAGS) -o $@ -c $<
+	$(CXX) $(CXXFLAGS) -o $@ -c $<
 
 #po = portable object .. for lack of a better term
 %.po : %.cpp
-	g++ $(CXXFLAGS) -DLOG_OUTPUT -fPIC -o $@ -c $<
+	$(CXX) $(CXXFLAGS) -DLOG_OUTPUT -fPIC -o $@ -c $<
 
 clean: 
 	-rm -f $(REBUILDABLES) *.dep *.deppo
