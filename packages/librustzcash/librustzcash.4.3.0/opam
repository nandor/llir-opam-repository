opam-version: "2.0"
maintainer: "n@ndor.email"
homepage: "https://gitlab.com/tezos/opam-repository"
bug-reports: "https://gitlab.com/tezos/opam-repository/issues"
authors: ["Nandor Licker" "Timothy M. Jones"]
license: "MIT"
build: [
  [ "cargo" "build" "--release" "--manifest-path" "rust/Cargo.toml" ]
]
install: [
  [ "mkdir" "-p" "%{prefix}%/lib/tezos-rust-libs" ]
  [ "cp" "rust/librustzcash/include/librustzcash.h" "%{prefix}%/lib/tezos-rust-libs/librustzcash.h" ]
  [ "cp" "rust/rustc-bls12-381/include/rustc_bls12_381.h" "%{prefix}%/lib/tezos-rust-libs/rustc_bls12_381.h" ]
  [ "cp" "rust/target/llir_x86_64-unknown-linux-musl/release/librustc_bls12_381.a" "%{prefix}%/lib/tezos-rust-libs/librustc_bls12_381.a" ]
  [ "cp" "rust/target/llir_x86_64-unknown-linux-musl/release/librustzcash.a" "%{prefix}%/lib/tezos-rust-libs/librustzcash.a" ]
]
depends: [ "rust" ]
synopsis: "zcash bindings for Rust/Tezos"
url {
  src: "git+https://gitlab.com/tezos/opam-repository"
}
patches: "llir.patch"
